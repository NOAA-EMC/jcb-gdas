-

  # Observation Space (I/O)
  # -----------------------
  obs space:
    name: ims_snow
    obsdatain:
      engine:
        type: H5File
        obsfile: "{{snow_obsdatain_path}}/{{snow_obsdatain_prefix}}{{observation_from_jcb}}{{snow_obsdatain_suffix}}"
    obsdataout:
      engine:
        type: H5File
        obsfile: "{{snow_obsdataout_path}}/{{snow_obsdataout_prefix}}{{observation_from_jcb}}{{snow_obsdataout_suffix}}"
    simulated variables: [totalSnowDepth]
  #

  # Observation Operator
  # --------------------
  obs operator:
    name: Identity
  #

  # Observation Filters (QC)
  # ------------------------
  obs pre filters:
  # assign observation error
  - filter: Perform Action
    filter variables:
    - name: totalSnowDepth
    action:
      name: assign error
      error parameter: 80.0

  obs prior filters:
  # remove land-ice and sea points
  - filter: Domain Check # land only
    where:
    - variable:
        name: GeoVaLs/slmsk
      minvalue: 0.5
      maxvalue: 1.5
  - filter: Domain Check  # no land-ice
    where:
    - variable:
        name: GeoVaLs/vtype
      minvalue: 14.5
      maxvalue: 15.5

  obs post filters:
  # gross error check
  - filter: Background Check
    filter variables:
    - name: totalSnowDepth
    threshold: 3.
    action:
      name: reject

  # thinning of remaining obs
  - filter: Gaussian Thinning
    horizontal_mesh: 40.0 # km

  # excludes where both obs & mod = 100% (set in IMS_proc)
  - filter: Bounds Check
    filter variables:
    - name: totalSnowDepth
    minvalue: 0.0
